<!DOCTYPE html> 
<html> 
	<head> 
	<title>Coillte App</title> 
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://static.stackmob.com/js/json2-min.js"></script>
    <script type="text/javascript" src="http://static.stackmob.com/js/underscore-1.3.3-min.js"></script>
    <script type="text/javascript" src="http://static.stackmob.com/js/stackmob-js-0.2.1-min.js"></script>
    <script type="text/javascript" src="http://static.stackmob.com/js/backbone-0.9.2-min.js"></script>    
    
    	<meta name="viewport" content="width=device-width, initial-scale=1"> 
       
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head> 
<body> 

<div data-role="page" data-title="Site Page" id="sitepage">
<script>

    /* <![CDATA[ */
      //Remember to initialize StackMob before you use other StackMob functionality.
        StackMob.init({
        appName: "trevsapp2",
        clientSubdomain: "trevorclowry",
        apiVersion: 0
      });
    /* ]]> */

      var Recreationsite = StackMob.Model.extend({
        schemaName: 'recreationsite'  //schemaName must be lowercase
      });
      
        var Recreationsites = StackMob.Collection.extend({
        model: Recreationsite
      });
        //var Todos = StackMob.Collection.extend({
        //model: Todo
      //});
		
		
</script>
<script>

function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

function getSiteInfo()
{

var siteparam = getUrlVars()["siteid"];
 var smQuery = new StackMob.Collection.Query();
  //get all Todo items of high priority, order by createddate in ascending order.
  //Get the first 5 results.
  smQuery.equals('recreationsite_id', siteparam).orderAsc('createddate'); //you can chain query parameters
  smQuery.setRange(0,0); //or add them individually
  
   var siteinfo = new Recreationsites();
   
  siteinfo.query(smQuery, {
				 
    success: function(collection) {
		
		
		siteinfo.each(function(Recreationsitez) {
			siteinfolistString =""; 
			//siteinfolistString += '<h1>' + Recreationsitez.get('sitename') + '</h1>';
			siteinfolistString += '<tr><td width="100">Site Name</td><td>'+ Recreationsitez.get('sitename') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">County</td><td>'+ Recreationsitez.get('county') + '</td></tr>'; 

siteinfolistString += '<tr><td width="100">Image</td><td>'+ Recreationsitez.get('image') + '</td></tr>'; 


siteinfolistString += '<tr><td width="100">Location</td><td>'+ Recreationsitez.get('location') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Download Map</td><td>'+ Recreationsitez.get('download_map') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Google Map</td><td>'+ Recreationsitez.get('googlemap') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Directions</td><td>'+ Recreationsitez.get('direction') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Grid Ref</td><td>'+ Recreationsitez.get('grid_ref') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">OS Map</td><td>'+ Recreationsitez.get('os_map') + '</td></tr>';
siteinfolistString += '<tr><td width="100">Trails</td><td>'+ Recreationsitez.get('trails') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Trails Map</td><td>'+ Recreationsitez.get('trails_map') + '</td></tr>';

siteinfolistString += '<tr><td width="100">Details</td><td>'+ Recreationsitez.get('details') + '</td></tr>';
siteinfolistString += '<tr><td width="100">Activities</td><td>'+ Recreationsitez.get('activities') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Features</td><td>'+ Recreationsitez.get('features') + '</td></tr>'; 


siteinfolistString += '<tr><td width="100">Number Car Spaces</td><td>'+ Recreationsitez.get('num_car_spaces') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Car Park Closes</tr><tr>'+ Recreationsitez.get('car_park_closes') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Car Park Opens</td><td>'+ Recreationsitez.get('car_park_opens') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Parking Fee</td><td>'+ Recreationsitez.get('parking_fee') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Parking Options</td><td>'+ Recreationsitez.get('parking_options') + '</td></tr>';  

siteinfolistString += '<tr><td width="100">Contact Name</td><td>'+ Recreationsitez.get('contact_name') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Contact Phone</td><td>'+ Recreationsitez.get('contact_phone') + '</td></tr>'; 
siteinfolistString += '<tr><td width="100">Contact Email</td><td>'+ Recreationsitez.get('contactemail') + '</td></tr>'; 


siteinfolistString += '<tr><td width="100">Last Updated</td><td>'+ Recreationsitez.get('lastmoddate') + '</td></tr>';

			
			
			console.debug(siteinfo.toJSON());
			$("#siteinfolist").append(siteinfolistString); 
			$('table').listview('refresh'); 
			
			 }
		 
	)}
  
   });
		
}

$( '#sitepage' ).live( 'pageshow',function(event){



getSiteInfo();
		
		
 });

</script>

	<div data-role="header" >
    <a href="index.html" >Back</a>
		<h1>Coillte Forest</h1>
	</div><!-- /header -->

	<div data-role="content" >	
    <ul >

</ul>


    <style>
			table { width:100%; }
			table caption { text-align:left;  }
			table thead th { text-align:left; border-bottom-width:1px; border-top-width:1px; }
			table th, td { text-align:left; padding:6px;} 
		</style>
    
     <table data-role="listview" data-inset="true"  id="siteinfolist">
	</table>

	<a href="favouritetext.html" data-rel="dialog" data-role="button" data-icon="star">Add Forest to Favourites</a>
    
	</div><!-- /content -->
    <div data-role="footer" class="ui-bar">
	<a href="index.html" data-role="button" data-icon="plus">Add to Favourites</a>
<a href="index.html" data-role="button" data-icon="minus">Remove from Favourites</a>
<a href="contact.html" data-role="button" data-icon="minus">Contact Us</a>

</div>

</div><!-- /page -->

</body>
</html>